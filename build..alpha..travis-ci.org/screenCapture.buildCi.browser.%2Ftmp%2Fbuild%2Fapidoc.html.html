<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://gitt.io/cli">gittio (v0.6.4)</a>
</h1>
<h4>Install Titanium modules and Alloy widgets</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio">module gittio</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.demo">
            function <span class="apidocSignatureSpan">gittio.</span>demo
            <span class="apidocSignatureSpan">(o)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.info">
            function <span class="apidocSignatureSpan">gittio.</span>info
            <span class="apidocSignatureSpan">(id, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.install">
            function <span class="apidocSignatureSpan">gittio.</span>install
            <span class="apidocSignatureSpan">(o)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.uninstall">
            function <span class="apidocSignatureSpan">gittio.</span>uninstall
            <span class="apidocSignatureSpan">(o)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>alloy</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>component</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>config</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>logger</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>tiapp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gittio.</span>utils</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.alloy">module gittio.alloy</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.alloy.addDependency">
            function <span class="apidocSignatureSpan">gittio.alloy.</span>addDependency
            <span class="apidocSignatureSpan">(id, version)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.alloy.dropDependency">
            function <span class="apidocSignatureSpan">gittio.alloy.</span>dropDependency
            <span class="apidocSignatureSpan">(id, version)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.component">module gittio.component</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.component.filterDists">
            function <span class="apidocSignatureSpan">gittio.component.</span>filterDists
            <span class="apidocSignatureSpan">(cmp, o)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.component.lookup">
            function <span class="apidocSignatureSpan">gittio.component.</span>lookup
            <span class="apidocSignatureSpan">(id, callback, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.config">module gittio.config</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.config.init">
            function <span class="apidocSignatureSpan">gittio.config.</span>init
            <span class="apidocSignatureSpan">(params, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.config.list">
            function <span class="apidocSignatureSpan">gittio.config.</span>list
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.config.set">
            function <span class="apidocSignatureSpan">gittio.config.</span>set
            <span class="apidocSignatureSpan">(key, value)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">gittio.config.</span>registry.url</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.logger">module gittio.logger</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.logger.debug">
            function <span class="apidocSignatureSpan">gittio.logger.</span>debug
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.logger.error">
            function <span class="apidocSignatureSpan">gittio.logger.</span>error
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.logger.info">
            function <span class="apidocSignatureSpan">gittio.logger.</span>info
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.logger.trace">
            function <span class="apidocSignatureSpan">gittio.logger.</span>trace
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.logger.warn">
            function <span class="apidocSignatureSpan">gittio.logger.</span>warn
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.tiapp">module gittio.tiapp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.tiapp.addDependency">
            function <span class="apidocSignatureSpan">gittio.tiapp.</span>addDependency
            <span class="apidocSignatureSpan">(id, version, platforms)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.tiapp.dropDependency">
            function <span class="apidocSignatureSpan">gittio.tiapp.</span>dropDependency
            <span class="apidocSignatureSpan">(id, version, platform)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.gittio.utils">module gittio.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.utils.camelCase">
            function <span class="apidocSignatureSpan">gittio.utils.</span>camelCase
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.utils.prefix">
            function <span class="apidocSignatureSpan">gittio.utils.</span>prefix
            <span class="apidocSignatureSpan">(id, version, platforms)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gittio.utils.prettyJSON">
            function <span class="apidocSignatureSpan">gittio.utils.</span>prettyJSON
            <span class="apidocSignatureSpan">(val, key, depth)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio" id="apidoc.module.gittio">module gittio</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.demo" id="apidoc.element.gittio.demo">
        function <span class="apidocSignatureSpan">gittio.</span>demo
        <span class="apidocSignatureSpan">(o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function demo(o) {

  if (config.context === 'project') {
    logger.error('will not create a project within a project: ' + project_path);
    return;
  }

  component.lookup(o.id, function(err, cmp) {

    if (err) {
      logger.error(err);
      return;
    }

    if (cmp.type !== 'module') {
      logger.error('demo only works with modules.');
      return;
    }

    var project_name = utils.camelCase(cmp.title);
    var project_path = path.join(process.cwd(), project_name);

    if (fs.existsSync(project_path)) {
      logger.error('cannot create already existing: ' + project_path);
      return;
    }

    // filter all dists
    var dists = component.filterDists(cmp, o);

    // nothing to install
    if (dists.length === 0) {
      var prefix = utils.prefix(o.id, o.version);
      return;
    }

    console.log('');
    console.log('--- CREATING PROJECT ---');
    console.log('');

    // create project
    exec('ti', ['create', '-t', 'app', '-u', 'http://gitt.io', '-p', cmp.platforms.join(','), '-n', project_name, '--id', cmp.id
, '-d', process.cwd()], {
      stdio: 'inherit'
    }, function(err, stdout) {

      if (err) {
        logger.error('Failed to create project: ' + err.stack);

        if (err.message.indexOf('spawn ti ENOENT') !== -1) {
          logger.error('This command requires the global Titanium CLI: [sudo] npm i -g titanium');
        }

        process.exit(1);
      }

      console.log('--- INSTALLING MODULE ---');
      console.log('');

      // install module
      exec('gittio', ['install', cmp.id + (o.version ? '@' + o.version : '') + (o.platform ? ':' + o.platform : '')], {
        cwd: project_path,
        stdio: 'inherit'
      }, function(err, stdout) {

        if (err) {
          logger.error('Failed to install module: ' + err.stack);
          process.exit(1);
        }

        console.log('');
        console.log('--- PREPARING EXAMPLES ---');
        console.log('');

        var build = null;

        // if the user defined the platform(s) we only want those
        if (undefined !== o.platform) {
          cmp.platforms = _.intersection(cmp.platforms, o.platform.split(','));

          if (cmp.platforms.length === 0) {
            console.error('The module has none of the requested platforms.');
            return;
          }
        }

        // for each platform
        _.some(cmp.platforms, function(platform) {

          if (platform === 'ios') {
            platform = 'iphone';
          }

          var module_path = path.join(project_path, 'modules', platform, cmp.id);
          var version = fs.readdirSync(module_path)[0];
          var example_path = path.join(module_path, version, 'example');

          // no example
          if (!fs.existsSync(path.join(example_path, 'app.js'))) {
            logger.warn('No example for ' + platform);
            return;
          }

          logger.info('Copied example for ' + platform);

          // copy example
          fs.copySync(example_path, path.join(project_path, 'Resources', platform));

          build = build || platform;

          // break the loop, we only need one example
          return true;
        });

        // no examples
        if (!build) {
          logger.error('No examples found.');
          return;
        }

        console.log('');
        console.log('--- BUILDING PROJECT ---');
        console.log('');

        // build first platform
        exec('ti', ['build', '-p', build], {
          cwd: project_path,
          stdio: 'inherit'
        }, function(err, stdout) {

          if (err) {
            logger.error('Failed to build project: ' + err.stack);
            process.exit(1);
          }

        });
      });
    });
  }, {
    action: 'demo'
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    argsToParams(args, params);

    if (!params.id) {
      logger.error('missing &lt;id&gt;');
      return;
    }

    return gittio.<span class="apidocCodeKeywordSpan">demo</span>(params);
  });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.info" id="apidoc.element.gittio.info">
        function <span class="apidocSignatureSpan">gittio.</span>info
        <span class="apidocSignatureSpan">(id, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function info(id, options) {

  config.init({
    global: true
  }, function() {
    component.lookup(id, function(err, info) {
      if (err) {
        if (options.output === "json") {
          console.log(JSON.stringify({
            error: err
          }));
        } else {
          logger.error(err);
        }
        return;
      }
      if (options.output === "json") {
        console.log(JSON.stringify(info, null, '  '));
      } else {
        utils.prettyJSON(info);
        console.log('');
      }
    }, {
      silent: options.output === "json",
      action: 'info'
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var deps = config.alloy_config.dependencies;

// widget is in list with same version (if given)
if (deps[id] &amp;&amp; (!version || deps[id] === version)) {
  return;
}

logger.<span class="apidocCodeKeywordSpan">info</span>(utils.prefix(id, version) + ' ' + (deps[id] ? 'updated in&amp;#
x27; : 'added to') + ' config.json');
config.alloy_config.dependencies[id] = version || '*';
fs.writeFileSync(config.alloy_config_file, JSON.stringify(config.alloy_config, null, "  "));
};

exports.dropDependency = function(id, version) {
var deps = config.alloy_config.dependencies;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.install" id="apidoc.element.gittio.install">
        function <span class="apidocSignatureSpan">gittio.</span>install
        <span class="apidocSignatureSpan">(o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function install(o) {

  if (o.version === '*') {
    delete o.version;
  }

  if (o.url) {
    return _installUrl(o.url, o);

  } else if (o.file) {
    return _installFile(o.file, o);

  } else if (o.id) {
    return _installSingle(o);

  } else {
    if (config.context === "global") {
      if (o.update &amp;&amp; o.type !== "widget") {
        return _installAllModules(o);
      } else {
        logger.error("This command must be executed from a project directory");
        return;
      }
    }
    if (o.type === 'widget') {
      return _installAllWidgets(o);
    } else if (o.type === 'module') {
      return _installAllModules(o);
    } else {
      return _installAll(o);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    global: this.global,
    platform: this.platform,
    type: env.type,
    update: true,
    alloyBase: this.alloyBase
  };
  config.init(params, function() {
    return gittio.<span class="apidocCodeKeywordSpan">install</span>(params);
  });
});

var uninstall_cmd = program.command('uninstall &lt;id&gt;')
.usage('&lt;id&gt;@&lt;version&gt;:&lt;platform&gt;')
.description('uninstall a module or widget')
.action(uninstall);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.uninstall" id="apidoc.element.gittio.uninstall">
        function <span class="apidocSignatureSpan">gittio.</span>uninstall
        <span class="apidocSignatureSpan">(o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function uninstall(o) {

  if (o.version === '*') {
    delete o.version;
  }

  if (!_uninstallWidget(o)) {
    _uninstallModule(o);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  argsToParams(args, params);

  if (!params.id) {
    logger.error('missing &lt;id&gt;');
    return;
  }

  return gittio.<span class="apidocCodeKeywordSpan">uninstall</span>(params);
});
}

function demo(env) {
notifier.notify();

var args = this.args;
...</pre></li>
    </ul>














</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.alloy" id="apidoc.module.gittio.alloy">module gittio.alloy</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.alloy.addDependency" id="apidoc.element.gittio.alloy.addDependency">
        function <span class="apidocSignatureSpan">gittio.alloy.</span>addDependency
        <span class="apidocSignatureSpan">(id, version)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addDependency = function (id, version) {
  var deps = config.alloy_config.dependencies;

  // widget is in list with same version (if given)
  if (deps[id] &amp;&amp; (!version || deps[id] === version)) {
    return;
  }

  logger.info(utils.prefix(id, version) + ' ' + (deps[id] ? 'updated in' : 'added to') + ' config.json');
  config.alloy_config.dependencies[id] = version || '*';
  fs.writeFileSync(config.alloy_config_file, JSON.stringify(config.alloy_config, null, "  "));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.alloy.dropDependency" id="apidoc.element.gittio.alloy.dropDependency">
        function <span class="apidocSignatureSpan">gittio.alloy.</span>dropDependency
        <span class="apidocSignatureSpan">(id, version)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dropDependency = function (id, version) {
  var deps = config.alloy_config.dependencies;

  // widget is not in list or with different version (if given)
  if (!deps[id] || (version &amp;&amp; version !== deps[id])) {
    return;
  }

  logger.info(utils.prefix(id, deps[id]) + ' removed from config.json');
  delete config.alloy_config.dependencies[id];
  fs.writeFileSync(config.alloy_config_file, JSON.stringify(config.alloy_config, null, "  "));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.component" id="apidoc.module.gittio.component">module gittio.component</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.component.filterDists" id="apidoc.element.gittio.component.filterDists">
        function <span class="apidocSignatureSpan">gittio.component.</span>filterDists
        <span class="apidocSignatureSpan">(cmp, o)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filterDists = function (cmp, o) {
  var platforms, dists = [];

  // split platforms given
  if (o.platform) {
    platforms = o.platform.split(',');

    // use deploymentTargets found in tiapp.xml
  } else if (config.targets &amp;&amp; _.size(config.targets) &gt; 0) {
    platforms = _.clone(config.targets);

    // install all platforms available
  } else {
    platforms = _.clone(cmp.platforms);
  }

  var addedCommonJS = false;

  // always include commonjs
  if (!_.contains(platforms, 'commonjs')) {
    addedCommonJS = true;
    platforms.unshift('commonjs');
  }

  var platform;

  // valid **specific** version, valid range, or something else (tags?)
  var targetVersion = semver.valid(o.version) || semver.validRange(o.version) || o.version;

  var versions = cmp.versions.map(function (v) {
    v.semver = semver.valid(v.version) || semver.valid(v.version + '.0') || null;
    return v;
  }).sort(looseCompareDists);

  var matches;

  // while we have platforms to cover
  while ((platform = platforms.shift()) !== undefined) {

    // filter for versions that..
    matches = versions.filter(function (v) {
      // have a dist and matches platform
      return v.dist &amp;&amp; _.contains(v.platforms, platform);
    });

    var version;

    if (!targetVersion) {
      version = matches.pop();

    } else {
      while ((version = matches.pop()) !== undefined) {
        if (version.semver !== null ? semver.satisfies(version.semver, targetVersion) : (version.version === targetVersion)) {
          break;
        }
      }
    }

    var prefix = utils.prefix(cmp.id, o.version, platform);

    // specific version not found
    if (!version &amp;&amp; o.version) {

      // don't error on the commonjs we added
      if (platform !== 'commonjs' || !addedCommonJS) {
        logger.error(prefix + ' not found');
      }

      continue;
    }

    // no distributable version found
    if (!version || !version.dist) {
      logger.error(prefix + ' no distributable available');
      continue;
    }

    // init paths
    if (cmp.type == 'widget') {
      version.trgPath = path.join(config.widgets_path, cmp.id);

      if (version.path.length &gt; 0) {
        version.srcPath = path.join(cmp.repo + "-" + version.tree, version.path);
      } else {
        version.srcPath = path.join(cmp.repo + "-" + version.tree);
      }

    } else {
      version.trgPath = o.global ? config.global_modules_path : config.modules_path;
      version.srcPath = 'modules';
    }

    // remove the platforms this dist covers from our wanted-list
    platforms = _.difference(platforms, version.platforms);

    dists.push(version);

    // for widgets we only do one
    if (cmp.type === 'widget') {
      break;
    }
  }

  return dists;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.component.lookup" id="apidoc.element.gittio.component.lookup">
        function <span class="apidocSignatureSpan">gittio.component.</span>lookup
        <span class="apidocSignatureSpan">(id, callback, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lookup = function (id, callback, options) {
  options = options || {};
  var prefix = utils.prefix(id);

  if (!options.silent) {
    logger.info(prefix + ' searching...');
  }

  var url = config['registry.url'] + id;

  if (options.action) {
    url += '?action=' + options.action;
  }

  request(url, function(error, response, body) {

    if (!error &amp;&amp; response.statusCode == 200) {
      var cmp = JSON.parse(body);

      if (cmp.error) {
        callback(prefix + ' ' + cmp.error, null);
        return;
      }

      // prepare for new types to be added
      if (cmp.type !== 'widget' &amp;&amp; cmp.type !== 'module') {
        callback(prefix + ' unsupported type: ' + cmp.type);
        return;
      }

      callback(null, cmp);

    } else {
      callback(prefix + ' error contacting registry: ' + url, null);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.config" id="apidoc.module.gittio.config">module gittio.config</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.config.init" id="apidoc.element.gittio.config.init">
        function <span class="apidocSignatureSpan">gittio.config.</span>init
        <span class="apidocSignatureSpan">(params, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (params, callback) {

  // check the rc for the keys below and use them if they were not already defined
  var allowedRcKeys = ['alloyBase', 'platform'];
  var rcParams = require('rc')('gittio', {});
  allowedRcKeys.forEach(function(key) {
    if (params[key] === null &amp;&amp; rcParams[key] !== null) {
      params[key] = rcParams[key];
    }
  });

  // export all the global config
  _.extend(exports, read());

  timodules.list(process.cwd(), function(err, res) {

<span class="apidocCodeCommentSpan">    /*
     res = {
       path: String, // project root path
       current: [{name, version, platform}] //current modules from tiapp.xml
       modules: [{name, version, platform, scope}] // list of installed modules
       tiapp: tiapp xml as an object
     }
    */
</span>    if (err) {

      if (_.isObject(err)) {
        err = err.toString();
      }

      if (err === 'Not Found') {

        if (!params.global) {
          logger.error("gittio must be run within a titanium project path if not using the --global flag");
          process.exit(1);
        } else {
          exports.context = 'global';
        }

      } else {

        if (err === true) {
          logger.error('Error running timodules.');

        } else {
          logger.error('Error running timodules: ' + err);

          if (/spawn (ti|appc) ENOENT/.test('spawn ti ENOENT')) {
            logger.error('You need either the Titanim or Appcelerator CLI to be installed:\n        [sudo] npm i -g titanium appcelerator
');
          } else if (err.indexOf('[Error: Module version mismatch.]') !== -1) {
            logger.error('You need to rebuild the AppC/Titanium CLI after switching major NodeJS version:\n        [sudo] npm i -
g titanium &amp;&amp; appc use latest --force');
          } else if (err.indexOf('(node) sys is deprecated. Use util instead.') !== -1) {
            logger.error('You have a Titanium CLI hook that messes with the output. Please disable.');
          }
        }

        process.exit(1);
      }

    } else {
      exports.context = 'project';
    }

    // build paths
    if (exports.context === 'project') {
      var base = res.path;
      var alloy = path.join(base, params.alloyBase || 'app');
      var alloy_config_file = path.join(alloy, 'config.json');
      var deploymentTargets = [];

      res.tiapp.obj['ti:app']['deployment-targets'][0].target.forEach(function(t) {
        if (t._ === 'true') {
          var platform = t.$.device;
          if (platform === 'ipad' || platform === 'iphone') {
            if (deploymentTargets.indexOf('ios') !== -1) {
              return;
            }
            platform = 'ios';
          }
          deploymentTargets.push(platform);
        }
      });

      exports.base = base;
      exports.modules_path = path.join(base, 'modules');
      exports.widgets_path = path.join(alloy, 'widgets');
      exports.isAlloy = fs.existsSync(alloy_config_file);
      exports.targets = deploymentTargets;

      // alloy config
      if (exports.isAlloy) {
        try {
          exports.alloy_config_file = alloy_config_file;
          exports.alloy_config = require(alloy_config_file);
        } catch (e) {
          logger.error(e);
          process.exit(1);
        }
      }
    }

    exports.current_modules = res.current;
    exports.available_modules = res.modules;
    exports.tiapp = res.tiapp;

    appc.ti(['sdk', 'list', '-o', 'json'], function(err, stdout, stderr) {

      if (err) {
        logger.error('Failed to get Titanium SDK config: ' + stderr);
        process.exit(1);
      }

      exports.global_path = JSON.parse(stdout).defaultInstallLocation;
      // modules setup
      exports.global_modules_path = path.join(exports.global_path, "modules");

      callback();
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    force: this.force,
    global: this.global,
    platform: this.platform,
    type: env.type,
    update: true,
    alloyBase: this.alloyBase
  };
  config.<span class="apidocCodeKeywordSpan">init</span>(params, function() {
    return gittio.install(params);
  });
});

var uninstall_cmd = program.command('uninstall &lt;id&gt;')
.usage('&lt;id&gt;@&lt;version&gt;:&lt;platform&gt;')
.description('uninstall a module or widget')
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.config.list" id="apidoc.element.gittio.config.list">
        function <span class="apidocSignatureSpan">gittio.config.</span>list
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function () {
  var cfg = read();
  var userConfig = readUser();

  console.log();

  _.each(cfg, function(val, key) {

    var color = (userConfig[key] !== undefined) ? 'green' : 'blue';

    console.log('  ' + chalk[color].bold(key));
    console.log('    ' + val);

  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
program.command('config')
.description('list all global configuration settings')
.action(function(env) {

  // only run if there are no arguments
  if (this.args.length === 1) {

    require('../lib/config').<span class="apidocCodeKeywordSpan">list</span>();

    // or commander will also run the other config command
    process.exit();

  }

});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.config.set" id="apidoc.element.gittio.config.set">
        function <span class="apidocSignatureSpan">gittio.config.</span>set
        <span class="apidocSignatureSpan">(key, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (key, value) {
  var defaultConfig = readDefault();

  if (defaultConfig[key] === undefined) {
    logger.error('Unknown configuration key: ' + key);
    return;
  }

  var userConfig = readUser();

  if (typeof value !== 'string') {
    delete userConfig[key];

  } else {

    if (value === 'true') {
      value = true;
    } else if (value === 'false') {
      value = false;
    }

    if (typeof value !== typeof defaultConfig[key]) {
      logger.error('Invalid configuration value type: ' + (typeof value) + ' (should be: ' + (typeof defaultConfig[key]) + ')');
      return;
    }

    userConfig[key] = value;
  }

  writeUser(userConfig);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

});

program.command('config &lt;key&gt; &lt;value&gt;')
.description('set a global configuration setting')
.action(function(env) {

  require('../lib/config').<span class="apidocCodeKeywordSpan">set</span>(this.args[0], this.args[1]);

});

program.parse(process.argv);

if (program.args.length === 0 || typeof program.args[program.args.length - 1] === 'string') {
notifier.notify();
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.logger" id="apidoc.module.gittio.logger">module gittio.logger</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.logger.debug" id="apidoc.element.gittio.logger.debug">
        function <span class="apidocSignatureSpan">gittio.logger.</span>debug
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">debug = function (msg) {
  console[level](color('[' + level.toUpperCase() + ']') + (level.length !== 5 ? ' ' : '') + ' ' + msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.logger.error" id="apidoc.element.gittio.logger.error">
        function <span class="apidocSignatureSpan">gittio.logger.</span>error
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (msg) {
  console[level](color('[' + level.toUpperCase() + ']') + (level.length !== 5 ? ' ' : '') + ' ' + msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    platform: this.platform,
    alloyBase: this.alloyBase
  };
  config.init(params, function() {
    argsToParams(args, params);

    if (!params.id) {
      logger.<span class="apidocCodeKeywordSpan">error</span>('missing &lt;id&gt;');
      return;
    }

    return gittio.uninstall(params);
  });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.logger.info" id="apidoc.element.gittio.logger.info">
        function <span class="apidocSignatureSpan">gittio.logger.</span>info
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">info = function (msg) {
  console[level](color('[' + level.toUpperCase() + ']') + (level.length !== 5 ? ' ' : '') + ' ' + msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var deps = config.alloy_config.dependencies;

// widget is in list with same version (if given)
if (deps[id] &amp;&amp; (!version || deps[id] === version)) {
  return;
}

logger.<span class="apidocCodeKeywordSpan">info</span>(utils.prefix(id, version) + ' ' + (deps[id] ? 'updated in&amp;#
x27; : 'added to') + ' config.json');
config.alloy_config.dependencies[id] = version || '*';
fs.writeFileSync(config.alloy_config_file, JSON.stringify(config.alloy_config, null, "  "));
};

exports.dropDependency = function(id, version) {
var deps = config.alloy_config.dependencies;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.logger.trace" id="apidoc.element.gittio.logger.trace">
        function <span class="apidocSignatureSpan">gittio.logger.</span>trace
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function (msg) {
  console[level](color('[' + level.toUpperCase() + ']') + (level.length !== 5 ? ' ' : '') + ' ' + msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.logger.warn" id="apidoc.element.gittio.logger.warn">
        function <span class="apidocSignatureSpan">gittio.logger.</span>warn
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">warn = function (msg) {
  console[level](color('[' + level.toUpperCase() + ']') + (level.length !== 5 ? ' ' : '') + ' ' + msg);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.tiapp" id="apidoc.module.gittio.tiapp">module gittio.tiapp</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.tiapp.addDependency" id="apidoc.element.gittio.tiapp.addDependency">
        function <span class="apidocSignatureSpan">gittio.tiapp.</span>addDependency
        <span class="apidocSignatureSpan">(id, version, platforms)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addDependency = function (id, version, platforms) {

  platforms.forEach(function(platform) {
    var prefix = utils.prefix(id, version, platform);
    var platform = platform.replace("ios", "iphone");

    var configured = _.find(config.current_modules, function(m) {
      return m.name === id &amp;&amp; m.platform === platform;
    });

    // add module
    if (!configured) {
      logger.info(prefix + ' adding to tiapp.xml');

      var module = {
        "_": id,
        "$": {
          platform: platform
        }
      };

      // only add version if asked for specific
      if (version) {
        module.$.version = version;
      }

      // first module
      if (!config.tiapp.obj['ti:app'].modules[0].module) {
        config.tiapp.obj['ti:app'].modules = [{
          module: [module]
        }];
      }

      // additional module
      else {
        config.tiapp.obj['ti:app'].modules[0].module.push(module);
      }
    }

    // update version, only if asked for specific or a version is set
    else if (configured.version || (version &amp;&amp; configured.version !== version)) {
      logger.info(prefix + ' updating in tiapp.xml');

      // find entry in tiapp.xml
      config.tiapp.obj['ti:app'].modules[0].module.forEach(function(m) {
        if (m["_"] === id &amp;&amp; m["$"].platform === platform) {
          m["$"].version = version || configured.version;
        }
      });
    }

    // nothing to do
    else {
      return;
    }

    // write tiapp.xml
    writeTiapp(config.tiapp.obj['ti:app'].modules[0]);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.tiapp.dropDependency" id="apidoc.element.gittio.tiapp.dropDependency">
        function <span class="apidocSignatureSpan">gittio.tiapp.</span>dropDependency
        <span class="apidocSignatureSpan">(id, version, platform)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dropDependency = function (id, version, platform) {
  var write = false;

  if (config.tiapp.obj['ti:app'].modules[0].module) {

    config.tiapp.obj['ti:app'].modules[0].module = _.filter(config.tiapp.obj['ti:app'].modules[0].module, function(o) {
      var attribs = o.$ || {};

      if (o._ !== id || (version &amp;&amp; attribs.version !== version) || (platform &amp;&amp; attribs.platform !== platform)) {
        return true;
      } else {
        logger.info(utils.prefix(id, attribs.version, attribs.platform) + ' removed from tiapp.xml');
        write = true;
        return false;
      }
    });
  }

  if (write) {
    writeTiapp(config.tiapp.obj['ti:app'].modules[0]);
  }

  return write;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gittio.utils" id="apidoc.module.gittio.utils">module gittio.utils</a></h1>


    <h2>
        <a href="#apidoc.element.gittio.utils.camelCase" id="apidoc.element.gittio.utils.camelCase">
        function <span class="apidocSignatureSpan">gittio.utils.</span>camelCase
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">camelCase = function (str) {

  return _.map(str.toLowerCase().split(/[^a-z0-9]/), function onEach(part) {
    return part.substr(0,1).toUpperCase() + part.substr(1);
  }).join('');

}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.utils.prefix" id="apidoc.element.gittio.utils.prefix">
        function <span class="apidocSignatureSpan">gittio.utils.</span>prefix
        <span class="apidocSignatureSpan">(id, version, platforms)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prefix = function (id, version, platforms) {
  var prefix = id;

  if (version &amp;&amp; version !== '*') {
    prefix += '@' + version;
  }

  if (platforms) {
    prefix += ':';

    if (typeof platforms === 'string') {
      prefix += platforms;
    } else {
      prefix += platforms.join(',');
    }
  }

  return chalk.blue(prefix);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var deps = config.alloy_config.dependencies;

// widget is in list with same version (if given)
if (deps[id] &amp;&amp; (!version || deps[id] === version)) {
  return;
}

logger.info(utils.<span class="apidocCodeKeywordSpan">prefix</span>(id, version) + ' ' + (deps[id] ? 'updated in&amp;#
x27; : 'added to') + ' config.json');
config.alloy_config.dependencies[id] = version || '*';
fs.writeFileSync(config.alloy_config_file, JSON.stringify(config.alloy_config, null, "  "));
};

exports.dropDependency = function(id, version) {
var deps = config.alloy_config.dependencies;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gittio.utils.prettyJSON" id="apidoc.element.gittio.utils.prettyJSON">
        function <span class="apidocSignatureSpan">gittio.utils.</span>prettyJSON
        <span class="apidocSignatureSpan">(val, key, depth)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function prettyJSON(val, key, depth) {

  if (!depth) {
    depth = 0;
  }

  var prefix = '';

  if (_.isString(key)) {

    if (depth) {
      prefix += Array(depth).join(' ');
    }

    prefix += chalk.green(key.toString()) + ':';
  }

  if (_.isArray(val) &amp;&amp; !_.isObject(_.first(val))) {
    console.log(prefix + ' ' + val.join(', '));

  } else if (_.isObject(val)) {
    console.log(prefix);

    if (!_.isArray(val)) {
      depth += 2;
    }

    _.each(val, function(val, key) {
      prettyJSON(val, key, depth);
    });

  } else {
    console.log(prefix + ((val !== null &amp;&amp; val !== undefined) ? ' ' + val : ''));
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>